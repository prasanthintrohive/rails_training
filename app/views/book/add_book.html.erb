<%= javascript_include_tag 'book', "data-turbo-track": "reload" %>

<h2>Add Book</h2>  
<%= form_with url:'/add_book', method: :get do |form| %>
  <%= form.check_box :show_deleted%>
  <%= form.label :show_deleted, "Show deleted books" %>
  <%= form.submit "Submit", class:'btn btn-secondary' %>
<% end %>

<%= form_with  scope: :book, url: create_book_path(@book)  do |f| %>
  <br>
<div class= "row add-book">
    <div class= "col-md-3">
      <%= f.text_field :title, placeholder: 'Title', class:"form-control ", id: "book-title"%>
    </div>  
    <div class= "col-md-3">
      <%= f.select :published_year, 1999.. Date.today.year, 
      {prompt: 'Select year'}, class: 'form-select ', onfocus: 'this.size=5', onblur:'this.size=1', onchange:'this.size=1, this.blur()', id: 'book-year' %>
    </div>

    <div class= "col-md-3">
      <%= f.select :author_id, @author.collect {|author| [ author.name , author.id ]},
       {prompt: 'Select author' },  class: "form-select", onfocus: 'this.size=5', onblur:'this.size=1', onchange:'this.size=1, this.blur()', id:'book-author'%>
    </div>
    <div class= "col-md-3">
      <span class = 'add-ajax-link' style="cursor:pointer"> 
        <img src="/assets/add-book.png" class="add-icon"><img/>
      </span>  
    </div>  
</div>
<% end %>
<br><br>


<table class="table table-striped table-bordered table-md overflow-auto" id="add-table">
  <thead>
    <tr>
      <th scope="col">S.no</th>
      <th scope="col">Book</th>
      <th scope="col">Author</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>

    </tr>
  </thead>
<tbody id="table-row">
<% @book.each_with_index do |book,index|  %>  
  <%= render partial: "book_row", locals: { book: book } %>
  <% end  %>
</tbody>

</table>