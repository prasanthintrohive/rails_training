<table id="dtBasicExample" class="table table-striped table-bordered table-md" cellspacing="0" width="100%">

  <thead>
    <tr>
      <th scope="col">S.no</th>
      <th scope="col">Book</th>
      <th scope="col">Author</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
      <% @books.each_with_index do |book, index|  %>
      <% unless book.loaned_books.where(user_id: current_user.id).where("status != 'returned'").exists? %>
        <tr>
          <td><%= index+1%></td>
          <td><%= book.title %></td>
          <td><%= book.author.name %></td>
          <td><%= link_to "Borrow", {controller: 'request', action: 'request_to_borrow', id: book.id} ,method: :get, class: 'btn btn-primary'%>
          </td>
        </tr>
         <% end %>
      <% end  %>
  </tbody>
</table>
